var Xe=Object.defineProperty,Ge=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ke=(o,i,n)=>i in o?Xe(o,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[i]=n,Q=(o,i)=>{for(var n in i||(i={}))Fe.call(i,n)&&ke(o,n,i[n]);if(Ee)for(var n of Ee(i))Je.call(i,n)&&ke(o,n,i[n]);return o},ze=(o,i)=>Ge(o,qe(i));import{aN as ie,F as W,ay as Ze,m as c,z as Ve,f as A,aj as Ce,a0 as ee,l as Qe,aO as eo,am as oo,af as oe,av as ro,V as re,ab as T,g as to,ah as no,aq as lo,W as io,X as ao,o as d,c as m,i as b,n as h,u as r,p as Y,a as N,h as y,w as D,ad as K,J as te,b as po,ae as so,N as uo,t as U,q as co,ao as vo,v as Ie}from"./app.d6e58541.js";import{u as fo,p as bo,d as ho,e as xo,o as _o,y as go,z as mo,E as M,w as yo}from"./index2.0308604b.js";import{g as wo,b as So,d as ne,u as Te,_ as Eo,w as ko}from"./base.82319d04.js";import{i as Ne,V as zo}from"./el-button.e0f07b2c.js";import{U as le,d as Ae}from"./event2.e3c79b80.js";function Co(o){return o==null}var Io=(o=>(o[o.TEXT=1]="TEXT",o[o.CLASS=2]="CLASS",o[o.STYLE=4]="STYLE",o[o.PROPS=8]="PROPS",o[o.FULL_PROPS=16]="FULL_PROPS",o[o.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",o[o.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",o[o.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",o[o.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",o[o.NEED_PATCH=512]="NEED_PATCH",o[o.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",o[o.HOISTED=-1]="HOISTED",o[o.BAIL=-2]="BAIL",o))(Io||{});function To(o){return ie(o)&&o.type===W}function No(o){return ie(o)&&o.type===Ze}function er(o){return ie(o)&&!To(o)&&!No(o)}const Ao=o=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(o),Lo=o=>o,Vo=["class","style"],$o=/^on[A-Z]/,Ro=(o={})=>{const{excludeListeners:i=!1,excludeKeys:n}=o,t=c(()=>((n==null?void 0:n.value)||[]).concat(Vo)),s=Ve();return s?c(()=>{var v;return wo(Object.entries((v=s.proxy)==null?void 0:v.$attrs).filter(([p])=>!t.value.includes(p)&&!(i&&$o.test(p))))}):c(()=>({}))};function Do(o){const i=A();function n(){if(o.value==null)return;const{selectionStart:s,selectionEnd:v,value:p}=o.value;if(s==null||v==null)return;const g=p.slice(0,Math.max(0,s)),u=p.slice(Math.max(0,v));i.value={selectionStart:s,selectionEnd:v,value:p,beforeTxt:g,afterTxt:u}}function t(){if(o.value==null||i.value==null)return;const{value:s}=o.value,{beforeTxt:v,afterTxt:p,selectionStart:g}=i.value;if(v==null||p==null||g==null)return;let u=s.length;if(s.endsWith(p))u=s.length-p.length;else if(s.startsWith(v))u=v.length;else{const x=v[g-1],w=s.indexOf(x,g-1);w!==-1&&(u=w+1)}o.value.setSelectionRange(u,u)}return[n,t]}let _;const Mo=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Oo=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Bo(o){const i=window.getComputedStyle(o),n=i.getPropertyValue("box-sizing"),t=Number.parseFloat(i.getPropertyValue("padding-bottom"))+Number.parseFloat(i.getPropertyValue("padding-top")),s=Number.parseFloat(i.getPropertyValue("border-bottom-width"))+Number.parseFloat(i.getPropertyValue("border-top-width"));return{contextStyle:Oo.map(p=>`${p}:${i.getPropertyValue(p)}`).join(";"),paddingSize:t,borderSize:s,boxSizing:n}}function Le(o,i=1,n){var t;_||(_=document.createElement("textarea"),document.body.appendChild(_));const{paddingSize:s,borderSize:v,boxSizing:p,contextStyle:g}=Bo(o);_.setAttribute("style",`${g};${Mo}`),_.value=o.value||o.placeholder||"";let u=_.scrollHeight;const x={};p==="border-box"?u=u+v:p==="content-box"&&(u=u-s),_.value="";const w=_.scrollHeight-s;if(Ce(i)){let f=w*i;p==="border-box"&&(f=f+s+v),u=Math.max(f,u),x.minHeight=`${f}px`}if(Ce(n)){let f=w*n;p==="border-box"&&(f=f+s+v),u=Math.min(f,u)}return x.height=`${u}px`,(t=_.parentNode)==null||t.removeChild(_),_=void 0,x}const Ho=So({id:{type:String,default:void 0},size:fo,disabled:Boolean,modelValue:{type:ne([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ne([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ne,default:""},prefixIcon:{type:Ne,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ne([Object,Array,String]),default:()=>Lo({})}}),jo={[le]:o=>ee(o),input:o=>ee(o),change:o=>ee(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},Po=["role"],Yo=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Ko=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Uo={name:"ElInput",inheritAttrs:!1},Wo=Qe(ze(Q({},Uo),{props:Ho,emits:jo,setup(o,{expose:i,emit:n}){const t=o,s={suffix:"append",prefix:"prepend"},v=Ve(),p=eo(),g=oo(),u=c(()=>{const e={};return t.containerRole==="combobox"&&(e["aria-haspopup"]=p["aria-haspopup"],e["aria-owns"]=p["aria-owns"],e["aria-expanded"]=p["aria-expanded"]),e}),x=Ro({excludeKeys:c(()=>Object.keys(u.value))}),{form:w,formItem:f}=bo(),{inputId:ae}=ho(t,{formItemContext:f}),$e=xo(),z=_o(),l=Te("input"),pe=Te("textarea"),O=oe(),C=oe(),L=A(!1),X=A(!1),V=A(!1),B=A(!1),se=A(),G=oe(t.inputStyle),$=c(()=>O.value||C.value),ue=c(()=>{var e;return(e=w==null?void 0:w.statusIcon)!=null?e:!1}),R=c(()=>(f==null?void 0:f.validateState)||""),de=c(()=>R.value&&zo[R.value]),Re=c(()=>B.value?go:mo),De=c(()=>[p.style,t.inputStyle]),ce=c(()=>[t.inputStyle,G.value,{resize:t.resize}]),S=c(()=>Co(t.modelValue)?"":String(t.modelValue)),H=c(()=>t.clearable&&!z.value&&!t.readonly&&!!S.value&&(L.value||X.value)),q=c(()=>t.showPassword&&!z.value&&!t.readonly&&!!S.value&&(!!S.value||L.value)),I=c(()=>t.showWordLimit&&!!x.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!z.value&&!t.readonly&&!t.showPassword),F=c(()=>Array.from(S.value).length),Me=c(()=>!!I.value&&F.value>Number(x.value.maxlength)),Oe=c(()=>!!g.suffix||!!t.suffixIcon||H.value||t.showPassword||I.value||!!R.value&&ue.value),[Be,He]=Do(O);ro(C,e=>{if(!I.value||t.resize!=="both")return;const a=e[0],{width:E}=a.contentRect;se.value={right:`calc(100% - ${E+15+6}px)`}});const j=()=>{const{type:e,autosize:a}=t;if(!(!vo||e!=="textarea"))if(a){const E=Ie(a)?a.minRows:void 0,k=Ie(a)?a.maxRows:void 0;G.value=Q({},Le(C.value,E,k))}else G.value={minHeight:Le(C.value).minHeight}},P=()=>{const e=$.value;!e||e.value===S.value||(e.value=S.value)},ve=e=>{const{el:a}=v.vnode;if(!a)return;const k=Array.from(a.querySelectorAll(`.${l.e(e)}`)).find(We=>We.parentNode===a);if(!k)return;const Se=s[e];g[Se]?k.style.transform=`translateX(${e==="suffix"?"-":""}${a.querySelector(`.${l.be("group",Se)}`).offsetWidth}px)`:k.removeAttribute("style")},J=()=>{ve("prefix"),ve("suffix")},Z=async e=>{Be();let{value:a}=e.target;t.formatter&&(a=t.parser?t.parser(a):a,a=t.formatter(a)),!V.value&&a!==S.value&&(n(le,a),n("input",a),await T(),P(),He())},fe=e=>{n("change",e.target.value)},be=e=>{n("compositionstart",e),V.value=!0},he=e=>{var a;n("compositionupdate",e);const E=(a=e.target)==null?void 0:a.value,k=E[E.length-1]||"";V.value=!Ao(k)},xe=e=>{n("compositionend",e),V.value&&(V.value=!1,Z(e))},je=()=>{B.value=!B.value,_e()},_e=async()=>{var e;await T(),(e=$.value)==null||e.focus()},Pe=()=>{var e;return(e=$.value)==null?void 0:e.blur()},ge=e=>{L.value=!0,n("focus",e)},me=e=>{var a;L.value=!1,n("blur",e),t.validateEvent&&((a=f==null?void 0:f.validate)==null||a.call(f,"blur").catch(E=>Ae()))},Ye=e=>{X.value=!1,n("mouseleave",e)},Ke=e=>{X.value=!0,n("mouseenter",e)},ye=e=>{n("keydown",e)},Ue=()=>{var e;(e=$.value)==null||e.select()},we=()=>{n(le,""),n("change",""),n("clear"),n("input","")};return re(()=>t.modelValue,()=>{var e;T(()=>j()),t.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"change").catch(a=>Ae()))}),re(S,()=>P()),re(()=>t.type,async()=>{await T(),P(),j(),J()}),to(async()=>{!t.formatter&&t.parser,P(),J(),await T(),j()}),no(async()=>{await T(),J()}),i({input:O,textarea:C,ref:$,textareaStyle:ce,autosize:lo(t,"autosize"),focus:_e,blur:Pe,select:Ue,clear:we,resizeTextarea:j}),(e,a)=>io((d(),m("div",te(r(u),{class:[e.type==="textarea"?r(pe).b():r(l).b(),r(l).m(r($e)),r(l).is("disabled",r(z)),r(l).is("exceed",r(Me)),{[r(l).b("group")]:e.$slots.prepend||e.$slots.append,[r(l).bm("group","append")]:e.$slots.append,[r(l).bm("group","prepend")]:e.$slots.prepend,[r(l).m("prefix")]:e.$slots.prefix||e.prefixIcon,[r(l).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[r(l).bm("suffix","password-clear")]:r(H)&&r(q)},e.$attrs.class],style:r(De),role:e.containerRole,onMouseenter:Ke,onMouseleave:Ye}),[b(" input "),e.type!=="textarea"?(d(),m(W,{key:0},[b(" prepend slot "),e.$slots.prepend?(d(),m("div",{key:0,class:h(r(l).be("group","prepend"))},[Y(e.$slots,"prepend")],2)):b("v-if",!0),N("div",{class:h([r(l).e("wrapper"),r(l).is("focus",L.value)])},[b(" prefix slot "),e.$slots.prefix||e.prefixIcon?(d(),m("span",{key:0,class:h(r(l).e("prefix"))},[N("span",{class:h(r(l).e("prefix-inner"))},[Y(e.$slots,"prefix"),e.prefixIcon?(d(),y(r(M),{key:0,class:h(r(l).e("icon"))},{default:D(()=>[(d(),y(K(e.prefixIcon)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0),N("input",te({id:r(ae),ref_key:"input",ref:O,class:r(l).e("inner")},r(x),{type:e.showPassword?B.value?"text":"password":e.type,disabled:r(z),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:be,onCompositionupdate:he,onCompositionend:xe,onInput:Z,onFocus:ge,onBlur:me,onChange:fe,onKeydown:ye}),null,16,Yo),b(" suffix slot "),r(Oe)?(d(),m("span",{key:1,class:h(r(l).e("suffix"))},[N("span",{class:h(r(l).e("suffix-inner"))},[!r(H)||!r(q)||!r(I)?(d(),m(W,{key:0},[Y(e.$slots,"suffix"),e.suffixIcon?(d(),y(r(M),{key:0,class:h(r(l).e("icon"))},{default:D(()=>[(d(),y(K(e.suffixIcon)))]),_:1},8,["class"])):b("v-if",!0)],64)):b("v-if",!0),r(H)?(d(),y(r(M),{key:1,class:h([r(l).e("icon"),r(l).e("clear")]),onMousedown:so(r(uo),["prevent"]),onClick:we},{default:D(()=>[po(r(yo))]),_:1},8,["class","onMousedown"])):b("v-if",!0),r(q)?(d(),y(r(M),{key:2,class:h([r(l).e("icon"),r(l).e("password")]),onClick:je},{default:D(()=>[(d(),y(K(r(Re))))]),_:1},8,["class"])):b("v-if",!0),r(I)?(d(),m("span",{key:3,class:h(r(l).e("count"))},[N("span",{class:h(r(l).e("count-inner"))},U(r(F))+" / "+U(r(x).maxlength),3)],2)):b("v-if",!0),r(R)&&r(de)&&r(ue)?(d(),y(r(M),{key:4,class:h([r(l).e("icon"),r(l).e("validateIcon"),r(l).is("loading",r(R)==="validating")])},{default:D(()=>[(d(),y(K(r(de))))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0)],2),b(" append slot "),e.$slots.append?(d(),m("div",{key:1,class:h(r(l).be("group","append"))},[Y(e.$slots,"append")],2)):b("v-if",!0)],64)):(d(),m(W,{key:1},[b(" textarea "),N("textarea",te({id:r(ae),ref_key:"textarea",ref:C,class:r(pe).e("inner")},r(x),{tabindex:e.tabindex,disabled:r(z),readonly:e.readonly,autocomplete:e.autocomplete,style:r(ce),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:be,onCompositionupdate:he,onCompositionend:xe,onInput:Z,onFocus:ge,onBlur:me,onChange:fe,onKeydown:ye}),null,16,Ko),r(I)?(d(),m("span",{key:0,style:co(se.value),class:h(r(l).e("count"))},U(r(F))+" / "+U(r(x).maxlength),7)):b("v-if",!0)],64))],16,Po)),[[ao,e.type!=="hidden"]])}}));var Xo=Eo(Wo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const or=ko(Xo);export{or as E,Io as P,Ao as a,To as b,er as c,Co as i};
